<% layout('layouts/boilerplate'); %>

<main id="weekMain">
    <h1>Items</h1>
    <div class="weekCollection">
    <% for (let item of items) { %>
        <div class="weekItems">
            <a href="/item/<%= item._id %>">
                <img src="<%= item.PhotosSrc[0] %>" alt="itemPhoto">
            </a>
            <a class="thingText" href="/item/<%= item._id %>">
                <p style="<%= item.Sold ? 'text-decoration: line-through;' : '' %>"><%= item.Title %></p>
                <% if (item.Sold) { %>
                    <span>Sold</span>
                <% } %>
            </a>
        </div>
    <% } %>
    </div>

    <% if (lots && lots.length > 0) { %>
        <hr>
        <h1>Lots</h1>
        <div class="weekCollection">
        <% for (let lot of lots) { %>
            <% if (lot.items && lot.items.length > 0) { %>
            <div class="weekItems">
                <a href="/lot/<%= lot._id %>">
                    <img src="<%= lot.PhotoSrc %>" alt="lotPhoto">
                </a>
                <a class="thingText" href="/lot/<%= lot._id %>">
                    <p style="<%= lot.sold ? 'text-decoration: line-through' : '' %>"><%= lot.title %></p>
                    <% if (lot.sold) { %>
                        <span>Sold</span>
                    <% } %>
                </a>
            </div>
            <% } %>
        <% } %>
        </div>
    <% } %>
</main>

<div id="weekNum" data-weeknum="<%= num %>"></div>

<script> let weekNum = document.querySelector("#weekNum").dataset.weeknum; </script>
<script type="module" src="/scripts/week.js"></script>